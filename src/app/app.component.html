<!-- the actual bootstrap modal -->
<ng-template #modal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Loading...</h4>
  </div>
  <div class="modal-body">
    <div>{{loadingMessage}}</div>
    <h4 *ngIf="loadingPercentage">{{loadingPercentage | percent}}</h4>
  </div>
</ng-template>

<div class="container-fluid">
  <div class="text-center">
    <h2>Constant-Q Music Transform</h2>
  </div>
  <mat-expansion-panel [expanded]="settingsExpand" class="mb-5">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <span class="font-italic">File Selection and Settings</span>
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="row">
      <div class="col-lg-9 col-md-8 pr-3">
        <div class="row">
          <div class="col-md-12 mb-4">
            <recommended-files [selectedFile]="selectedFile"></recommended-files>
          </div>
          <div class="col-md-12 mb-4">
            <url-selector [selectedFile]="selectedFile"></url-selector>
          </div>
          <div class="col-md-12 mb-4">
            <file-selector [selectedFile]="selectedFile"></file-selector>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-4 pl-3">
        <settings (onMinPitch)="onMinPitch($event)" (onMaxPitch)="onMaxPitch($event)" (onFps)="onFps($event)" ></settings>
      </div>
    </div>
  </mat-expansion-panel>



  <div class="row text-center">
    <!-- if controls should be shown (i.e. an audio file has been selected), 
        visualizes the music -->
    <div *ngIf="showControls" class="col-md-12 pl-5 pr-5">
      <audio-visualizer [title]="title" [pitches]="noteLetters" [pitchData]="curPitches" [max]="graphMax">
      </audio-visualizer>
    </div>
    <!-- if controls should be shown (i.e. an audio file has been selected), 
        provides playback for the audio file -->
    <div *ngIf="showControls" class="col-md-12 pl-5 pr-5">
      <audio-player [playback]="playback"></audio-player>
    </div>
  </div>
  <div style="margin-bottom: 50px;"></div>
</div>