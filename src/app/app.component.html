<div class="text-center">
  <h2>Constant-Q Music Transform</h2>
</div>
<mat-expansion-panel [expanded]="true">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <span class="font-italic">File Selection and Settings</span>
    </mat-panel-title>
  </mat-expansion-panel-header>
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-8 p-2">
        <div class="row">
          <div class="col-md-12 mb-4">
            <recommended-files [selectedFile]="selectedFile"></recommended-files>
          </div>
          <div class="col-md-12 mb-4">
            <url-selector [selectedFile]="selectedFile"></url-selector>
          </div>
          <div class="col-md-12 mb-4">
            <file-selector [selectedFile]="selectedFile"></file-selector>
          </div>
        </div>
      </div>
      <div class="col-md-4 p-2">
        <settings></settings>
      </div>
    </div>
  </div>
</mat-expansion-panel>


<div style="text-align:center">
  <!-- the actual bootstrap modal -->
  <ng-template #modal let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Loading...</h4>
    </div>
    <div class="modal-body">
      <div>{{loadingMessage}}</div>
      <h4 *ngIf="loadingPercentage">{{loadingPercentage | percent}}</h4>
    </div>
  </ng-template>

  <div class="container-fluid">
   
    <div class="row">
      <!-- if controls should be shown (i.e. an audio file has been selected), 
        visualizes the music -->
      <div *ngIf="showControls" class="col-md-12 pl-5 pr-5">
        <audio-visualizer [title]="title" [pitches]="noteLetters" [pitchData]="curPitches" [max]="graphMax">
        </audio-visualizer>
      </div>
      <!-- if controls should be shown (i.e. an audio file has been selected), 
        provides playback for the audio file -->
      <div *ngIf="showControls" class="col-md-12 pl-5 pr-5">
        <audio-player [playback]="playback"></audio-player>
      </div>
    </div>
    <div style="margin-bottom: 50px;"></div>
  </div>